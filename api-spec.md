# API Specification

## API Routes

| Route                                                  | Method | Summary                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| :----------------------------------------------------- | :----: | :------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| /config                                                |  GET   | All REST clients should first call this route to get catalog configuration properties from the server to configure the catalog and its HTTP client.Configuration from the server consists of two sets of key/value pairs.                                                                                                                                                                                                                                                                                                                   |
| /namespaces                                            |  GET   | List all namespaces at a certain level, optionally starting from a given parent namespace. If table accounting.tax.paid.info exists, using 'SELECT NAMESPACE IN accounting' would translate into `GET /namespaces?parent=accounting` and must return a namespace, ["accounting", "tax"] only. Using 'SELECT NAMESPACE IN accounting.tax' would translate into `GET /namespaces?parent=accounting%1Ftax` and must return a namespace, ["accounting", "tax", "paid"]. If `parent` is not provided, all top-level namespaces should be listed. |
| /namespeaces                                           |  POST  | Create a namespace, with an optional set of properties. The server might also add properties, such as `last_modified_time` etc. operationId: createNamespace                                                                                                                                                                                                                                                                                                                                                                                |
| /namespaces/{namespace}                                |  GET   | Load the metadata properties for a namespace operationId: loadNamespaceMetadata description: Return all stored metadata properties for a given namespace                                                                                                                                                                                                                                                                                                                                                                                    |
| /namespaces/{namespace}                                |  HEAD  | summary: Check if a namespace exists operationId: namespaceExists description: Check if a namespace exists. The response does not contain a body.                                                                                                                                                                                                                                                                                                                                                                                           |
| /namespaces/{namespace}                                | DELETE | summary: Drop a namespace from the catalog. Namespace must be empty. operationId: dropNamespace                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| /namespaces/{namespace}/properties                     |  POST  | Set and/or remove properties on a namespace. The request body specifies a list of properties to remove and a map of key value pairs to update. Properties that are not in the request are not modified or removed by this call. Server implementations are not required to support namespace properties.                                                                                                                                                                                                                                    |
| /namespaces/{namespace}/tables                         |  GET   | summary: List all table identifiers underneath a given namespace description: Return all table identifiers under this namespace operationId: listTables                                                                                                                                                                                                                                                                                                                                                                                     |
| /namespaces/{namespace}/tables                         |  POST  | Create a table in the given namespace description: Create a table.                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| /namespaces/{namespace}/register                       |  POST  | Register a table in the given namespace using given metadata file location description:Register a table using given metadata file location.                                                                                                                                                                                                                                                                                                                                                                                                 |
| /namespaces/{namespace}/tables/{table}                 |  GET   | summary: Load a table from the catalog operationId: loadTable description: Load a table from the catalog.The response contains both configuration and table metadata. The configuration, if non-empty is used as additional configuration for the table that overrides catalog configuration. For example, this configuration may change the FileIO implementation to be used for the table. The response also contains the table's full metadata, matching the table metadata JSON file.                                                   |
| /namespaces/{namespace}/tables/{table}                 |  POST  | ??                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| /namespaces/{namespace}/tables/{table}                 | DELETE | Drop a table from the catalog operationId:dropTable                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| /namespaces/{namespace}/tables/{table}                 |  HEAD  | summary: Check if a table exists operationId: tableExists description: Check if a table exists within a given namespace. The response does not contain a body.                                                                                                                                                                                                                                                                                                                                                                              |
| /tables/rename                                         |  POST  | summary: Rename a table from its current name to a new name description: Rename a table from one identifier to another. It's valid to move a table across namespaces, but the server implementation is not required to support it. operationId: renameTable                                                                                                                                                                                                                                                                                 |
| /namespaces/{namespace}/tables/{table}/metrics         |  POST  | summary: Send a metrics report to this endpoint to be processed by the backend operationId: reportMetrics                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| /namespaces/{namespace}/tables/{table}/find/{tuple_id} |  GET   | summary: Return the physical file location for a given tuple ID. For example: input Table 1 Key A -> gives s3://bucket1                                                                                                                                                                                                                                                                                                                                                                                                                     |
